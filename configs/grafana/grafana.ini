# Конфигурация Grafana
[server]
protocol = http
http_port = 3000
domain = localhost
root_url = http://localhost:3000
enforce_domain = false

[security]
# Отключаем регистрацию новых пользователей
disable_initial_admin_creation = false
admin_user = admin
# Пароль задается через переменную окружения
disable_gravatar = true
cookie_secure = false
cookie_samesite = lax
# Защита от clickjacking
allow_embedding = false
# Скрываем версию Grafana
hide_version = true

[users]
# Разрешить пользователям создавать организации
allow_org_create = false
# Автоматическое назначение новых пользователей в организацию
auto_assign_org = true
auto_assign_org_id = 1
auto_assign_org_role = Viewer
# Отключить регистрацию
allow_sign_up = false
# Требовать подтверждения email
verify_email_enabled = false

[auth]
# Отключаем анонимный доступ
disable_login_form = false
disable_signout_menu = false
# Время сессии
login_cookie_name = grafana_session
login_maximum_inactive_lifetime_duration = 24h
login_maximum_lifetime_duration = 30d
token_rotation_interval_minutes = 10

[auth.anonymous]
# Отключаем анонимный доступ
enabled = false

[auth.basic]
enabled = true

[auth.proxy]
enabled = false

[dataproxy]
timeout = 30
keep_alive_seconds = 30
# Ограничиваем размер ответа
max_idle_connections = 100
idle_conn_timeout_seconds = 90

[analytics]
reporting_enabled = false
check_for_updates = false

[log]
mode = console
level = info
filters = rendering:debug

[log.console]
level = info
format = json

[alerting]
enabled = true
execute_alerts = true

[metrics]
enabled = true
interval_seconds = 10

[explore]
enabled = true

[paths]
data = /var/lib/grafana
logs = /var/log/grafana
plugins = /var/lib/grafana/plugins
provisioning = /etc/grafana/provisioning

[plugins]
enable_alpha = false
allow_loading_unsigned_plugins = ""

[snapshots]
external_enabled = false
